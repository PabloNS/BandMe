<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml"
	xmlns:th="http://www.thymeleaf.org"
	xmlns:sec="http://www.thymeleaf.org/thymeleaf-extras-springsecurity3">
<head>
<title>BandMe</title>
  	<link rel="stylesheet" type="text/css" th:href="@{/css/skeleton.css}" />
    <link rel="stylesheet" type="text/css" th:href="@{/css/myCss.css}" />
</head>
<body>
	  <div class="container" >
		<div class="row">
			<div class="offset-by-three one-half column" style="margin-top:20%; box-shadow:0 2px 10px #606060; padding: 3rem; padding-bottom: 1rem; border-radius: 1rem">
			  	<form th:action="@{/posts}" method="post" class="u-full-width" style="margin-top:2rem">
					<label for="instruments">Instrument</label>
					<select id="instruments" class="form-control" required name="instrument">
						<option>Select instrument</option>
					</select> 

					<label for="descriptionInput">Description</label>
          			<textarea id="descriptionInput" maxlength="1400" th:text="${post.description}" name="description" class="u-full-width" style="resize: none; height: 500px"></textarea>
						
					<button class="button-primary u-full-width" type="submit">Add Post</button>
       			</form>
			</div>
		</div>
     </div>
	<script>
		function loadInstruments() {
			$.ajax({
		        type: 'GET',
		        url: '/instruments',
		        cache: false,
		        success: function (result) {
		        	var combo = document.getElementById("instruments");
		        	result.forEach(function(instrument){
					    var option = document.createElement("option");
					    option.text = instrument.name;
					    option.value = instrument.id;
					    combo.add(option);
		        	});
		        }
		    });
		}
		loadInstruments();
	</script>
</body>
</html>